<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.0/sandstone/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/solarized-light.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-grid.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-theme-balham.min.css" rel="stylesheet" type="text/css">
        <link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
        <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
    </head>
    <body>
        <p id="loading">Loading ...</p>
        <div id="app"></div>
    </body>
    <script id="state" type="text">"{:options {:reverse-notes? false, :header? false, :notes-in-cards? false, :initially-collapse? false, :auto-scroll? false, :port 1903, :custom-header [:div {:style {:font-style \"italic\", :font-family \"\\\"Lucida Console\\\", Courier, monospace\"}} \"(notespace)\" [:p \"Fri Jul 16 14:44:24 IDT 2021\"] nil [:hr]], :custom-footer [:div [:hr] [:hr]]}, :ids [\"593\" \"594\" \"595\" \"596\" \"597\" \"598\" \"599\" \"600\" \"601\" \"602\" \"603\" \"604\" \"605\" \"606\" \"607\" \"608\" \"609\" \"610\" \"611\" \"612\" \"613\" \"614\" \"615\" \"616\" \"617\" \"618\" \"619\" \"620\" \"621\" \"622\" \"623\" \"624\" \"625\" \"626\" \"627\" \"628\" \"629\" \"630\" \"631\" \"632\" \"633\" \"634\" \"635\" \"636\" \"637\" \"638\" \"639\" \"640\" \"641\" \"642\"], :id->content {\"641\" [:div [:p] nil nil [:p/markdown \"or you can just use inner-join from tech.ml.dataset:\"]], \"612\" [:div [:p] nil nil [:p/markdown \"Many-to-one joins are joins in which one of the two key columns contains\\nduplicate entries. For the many-to-one case, the resulting DataFrame will\\npreserve those duplicate entries as appropriate. Consider the following example\\nof a many-to-one join:\"]], \"616\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(tablecloth/inner-join ds3 ds4 :group)\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"inner-join [4 4]:\\n\\n|      :group | :employee | :hire-date | :supervisor |\\n|-------------|-----------|-----------:|-------------|\\n|  Accounting |       Bob |       2008 |       Carly |\\n| Engineering |      Lisa |       2004 |       Guido |\\n| Engineering |      Jake |       2012 |       Guido |\\n|          HR |       Sue |       2014 |       Steve |\\n\"]]], \"600\" [:div [:p] nil nil [:p/markdown \"The pd.merge() function implements a number of types of joins: the one-to-one,\\nmany-to-one, and many-to-many joins. All three types of joins are accessed via\\nan identical call to the pd.merge() interface; the type of join performed\\ndepends on the form of the input data. Here we will show simple examples of the\\nthree types of merges, and discuss detailed options further below.\"]], \"604\" [:div [:p] [:div [:p/code {:code \"(def ds2 (tablecloth/dataset {:employee [\\\"Lisa\\\" \\\"Bob\\\" \\\"Jake\\\" \\\"Sue\\\"]\\n                              :hire-date [2004 2008 2012 2014]}))\", :bg-class \"bg-light\"}]] nil nil], \"613\" [:div [:p] [:div [:p/code {:code \"(def ds4 (tablecloth/dataset {:group [\\\"Accounting\\\" \\\"Engineering\\\" \\\"HR\\\"]\\n                              :supervisor [\\\"Carly\\\" \\\"Guido\\\" \\\"Steve\\\"]}))\", :bg-class \"bg-light\"}]] nil nil], \"634\" [:div [:p] [:div [:p/code {:code \"ds1\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"_unnamed [4 2]:\\n\\n| :employee |      :group |\\n|-----------|-------------|\\n|       Bob |  Accounting |\\n|      Jake | Engineering |\\n|      Lisa | Engineering |\\n|       Sue |          HR |\\n\\n\"}]], \"599\" [:div [:p] nil nil [:p/markdown \"## Categories of Joins\"]], \"630\" [:div [:p] nil nil [:p/markdown \"This option works only if both the left and right DataFrames have the\\nspecified column name.\"]], \"607\" [:div [:p] nil nil [:p/markdown \"To combine this information into a single DataFrame, we can use the pd.merge()\\nfunction:\"]], \"603\" [:div [:p] [:div [:p/code {:code \"(def ds1 (tablecloth/dataset {:employee [\\\"Bob\\\" \\\"Jake\\\" \\\"Lisa\\\" \\\"Sue\\\"]\\n                              :group [\\\"Accounting\\\" \\\"Engineering\\\" \\\"Engineering\\\" \\\"HR\\\"]}))\", :bg-class \"bg-light\"}]] nil nil], \"632\" [:div [:p] nil nil [:p/markdown \"At times you may wish to merge two datasets with different column names; for\\nexample, we may have a dataset in which the employee name is labeled as \\\"name\\\"\\nrather than \\\"employee\\\". In this case, we can use the left_on and right_on\\nkeywords to specify the two column names:\"]], \"598\" [:div [:p] nil nil [:p/markdown \"The behavior implemented in pd.merge() is a subset of what is known as\\nrelational algebra, which is a formal set of rules for manipulating relational\\ndata, and forms the conceptual foundation of operations available in most\\ndatabases. The strength of the relational algebra approach is that it proposes\\nseveral primitive operations, which become the building blocks of more\\ncomplicated operations on any dataset. With this lexicon of fundamental\\noperations implemented efficiently in a database or other program, a wide range\\nof fairly complicated composite operations can be performed.\\n\\nPandas implements several of these fundamental building-blocks in the pd.merge()\\nfunction and the related join() method of Series and Dataframes. As we will see,\\nthese let you efficiently link data from different sources.\"]], \"605\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\nds1\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"_unnamed [4 2]:\\n\\n| :employee |      :group |\\n|-----------|-------------|\\n|       Bob |  Accounting |\\n|      Jake | Engineering |\\n|      Lisa | Engineering |\\n|       Sue |          HR |\\n\"]]], \"594\" [:div [:p] nil nil [:p/markdown \"# Combining Datasets: Merge and Join\"]], \"621\" [:div [:p] [:div [:p/code {:code \"ds1\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"_unnamed [4 2]:\\n\\n| :employee |      :group |\\n|-----------|-------------|\\n|       Bob |  Accounting |\\n|      Jake | Engineering |\\n|      Lisa | Engineering |\\n|       Sue |          HR |\\n\\n\"}]], \"618\" [:div [:p] nil nil [:p/markdown \"### Many-to-many joins\"]], \"609\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\nds3\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"inner-join [4 3]:\\n\\n| :employee |      :group | :hire-date |\\n|-----------|-------------|-----------:|\\n|      Lisa | Engineering |       2004 |\\n|       Bob |  Accounting |       2008 |\\n|      Jake | Engineering |       2012 |\\n|       Sue |          HR |       2014 |\\n\"]]], \"639\" [:div [:p] nil nil [:p/markdown \"The result has a redundant column that we can drop if desiredâ€“for example, by\\nusing the drop-columns method of tablecloth:\"]], \"631\" [:div [:p] nil nil [:p/markdown \"### The left_on and right_on keywords\"]], \"610\" [:div [:p] nil nil [:p/markdown \"The pd.merge() function recognizes that each DataFrame has an \\\"employee\\\"\\ncolumn, and automatically joins using this column as a key. The result of the\\nmerge is a new DataFrame that combines the information from the two\\ninputs. Notice that the order of entries in each column is not necessarily\\nmaintained: in this case, the order of the \\\"employee\\\" column differs between\\ndf1 and df2, and the pd.merge() function correctly accounts for\\nthis. Additionally, keep in mind that the merge in general discards the index,\\nexcept in the special case of merges by index (see the left_index and\\nright_index keywords, discussed momentarily).\"]], \"626\" [:div [:p] nil nil [:p/markdown \"We've already seen the default behavior of pd.merge(): it looks for one or\\nmore matching column names between the two inputs, and uses this as the\\nkey. However, often the column names will not match so nicely, and pd.merge()\\nprovides a variety of options for handling this.\"]], \"629\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(tablecloth/inner-join ds1 ds2 :employee)\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"inner-join [4 3]:\\n\\n| :employee |      :group | :hire-date |\\n|-----------|-------------|-----------:|\\n|      Lisa | Engineering |       2004 |\\n|       Bob |  Accounting |       2008 |\\n|      Jake | Engineering |       2012 |\\n|       Sue |          HR |       2014 |\\n\"]]], \"636\" [:div [:p] [:div [:p/code {:code \"(require '[tech.v3.dataset.join :as join])\", :bg-class \"bg-light\"}]] nil nil], \"637\" [:div [:p] [:div [:p/code {:code \"(require '[tech.v3.dataset :as dataset])\", :bg-class \"bg-light\"}]] nil nil], \"601\" [:div [:p] nil nil [:p/markdown \"### One-to-one joins\"]], \"623\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(tablecloth/inner-join ds1 ds5 :group)\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"400px\"}} [:p/markdown \"inner-join [8 3]:\\n\\n|      :group | :employee |      :skills |\\n|-------------|-----------|--------------|\\n|  Accounting |       Bob |         math |\\n|  Accounting |       Bob | spreadsheets |\\n| Engineering |      Jake |       coding |\\n| Engineering |      Lisa |       coding |\\n| Engineering |      Jake |        linux |\\n| Engineering |      Lisa |        linux |\\n|          HR |       Sue | spreadsheets |\\n|          HR |       Sue | organization |\\n\"]]], \"597\" [:div [:p] nil nil [:p/markdown \"## Relational Algebra\"]], \"633\" [:div [:p] [:div [:p/code {:code \"(def ds3 (tablecloth/dataset {:name [\\\"Bob\\\" \\\"Jake\\\" \\\"Lisa\\\" \\\"Sue\\\"]\\n                              :salary [70000 80000 120000 90000]}))\", :bg-class \"bg-light\"}]] nil nil], \"635\" [:div [:p] [:div [:p/code {:code \"ds3\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"_unnamed [4 2]:\\n\\n| :name | :salary |\\n|-------|--------:|\\n|   Bob |   70000 |\\n|  Jake |   80000 |\\n|  Lisa |  120000 |\\n|   Sue |   90000 |\\n\\n\"}]], \"606\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\nds2\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"_unnamed [4 2]:\\n\\n| :employee | :hire-date |\\n|-----------|-----------:|\\n|      Lisa |       2004 |\\n|       Bob |       2008 |\\n|      Jake |       2012 |\\n|       Sue |       2014 |\\n\"]]], \"619\" [:div [:p] nil nil [:p/markdown \"Many-to-many joins are a bit confusing conceptually, but are nevertheless well\\ndefined. If the key column in both the left and right array contains duplicates,\\nthen the result is a many-to-many merge. This will be perhaps most clear with a\\nconcrete example. Consider the following, where we have a DataFrame showing one\\nor more skills associated with a particular group. By performing a many-to-many\\njoin, we can recover the skills associated with any individual person:\"]], \"627\" [:div [:p] nil nil [:p/markdown \"### The on keyword\"]], \"642\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(join/inner-join [:employee :name] ds1 ds3)\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"inner-join [4 3]:\\n\\n| :employee |      :group | :salary |\\n|-----------|-------------|--------:|\\n|       Bob |  Accounting |   70000 |\\n|      Jake | Engineering |   80000 |\\n|      Lisa | Engineering |  120000 |\\n|       Sue |          HR |   90000 |\\n\"]]], \"640\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(-> (join/right-join [:employee :name] ds1 ds3)\\n    (dataset/drop-columns [:name]))\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"right-outer-join [4 3]:\\n\\n| :employee |      :group | :salary |\\n|-----------|-------------|--------:|\\n|       Bob |  Accounting |   70000 |\\n|      Jake | Engineering |   80000 |\\n|      Lisa | Engineering |  120000 |\\n|       Sue |          HR |   90000 |\\n\"]]], \"596\" [:div [:p] [:div [:p/code {:code \"(require '[tablecloth.api :as tablecloth])\", :bg-class \"bg-light\"}]] nil nil], \"602\" [:div [:p] nil nil [:p/markdown \"Perhaps the simplest type of merge expresion is the one-to-one join, which is\\nin many ways very similar to the column-wise concatenation seen in Combining\\nDatasets: Concat & Append. As a concrete example, consider the following two\\nDataFrames which contain information on several employees in a company:\\n\\n```\\ndf1 = pd.DataFrame({'employee': ['Bob', 'Jake', 'Lisa', 'Sue'],\\n                    'group': ['Accounting', 'Engineering', 'Engineering', 'HR']})\\ndf2 = pd.DataFrame({'employee': ['Lisa', 'Bob', 'Jake', 'Sue'],\\n                    'hire_date': [2004, 2008, 2012, 2014]})\\ndisplay('df1', 'df2')\\n```\"]], \"593\" [:div [:p] nil nil nil], \"617\" [:div [:p] nil nil [:p/markdown \"The resulting DataFrame has an aditional column with the \\\"supervisor\\\"\\ninformation, where the information is repeated in one or more locations as\\nrequired by the inputs.\\n\"]], \"595\" [:div [:p] nil nil [:p/markdown \"One essential feature offered by Pandas is its high-performance, in-memory\\njoin and merge operations. If you have ever worked with databases, you should be\\nfamiliar with this type of data interaction. The main interface for this is the\\npd.merge function, and we'll see few examples of how this can work in practice.\\n\\nFor convenience, we will start by redefining the display() functionality from\\nthe previous section:\"]], \"614\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\nds3\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"inner-join [4 3]:\\n\\n| :employee |      :group | :hire-date |\\n|-----------|-------------|-----------:|\\n|      Lisa | Engineering |       2004 |\\n|       Bob |  Accounting |       2008 |\\n|      Jake | Engineering |       2012 |\\n|       Sue |          HR |       2014 |\\n\"]]], \"611\" [:div [:p] nil nil [:p/markdown \"### Many-to-one joins\"]], \"622\" [:div [:p] [:div [:p/code {:code \"ds5\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"_unnamed [6 2]:\\n\\n|      :group |      :skills |\\n|-------------|--------------|\\n|  Accounting |         math |\\n|  Accounting | spreadsheets |\\n| Engineering |       coding |\\n| Engineering |        linux |\\n|          HR | spreadsheets |\\n|          HR | organization |\\n\\n\"}]], \"615\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\nds4\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"230px\"}} [:p/markdown \"_unnamed [3 2]:\\n\\n|      :group | :supervisor |\\n|-------------|-------------|\\n|  Accounting |       Carly |\\n| Engineering |       Guido |\\n|          HR |       Steve |\\n\"]]], \"625\" [:div [:p] nil nil [:p/markdown \"## Specification of the Merge Key\"]], \"624\" [:div [:p] nil nil [:p/markdown \"These three types of joins can be used with other Pandas tools to implement a\\nwide array of functionality. But in practice, datasets are rarely as clean as\\nthe one we're working with here. In the following section we'll consider some of\\nthe options provided by pd.merge() that enable you to tune how the join\\noperations work.\"]], \"620\" [:div [:p] [:div [:p/code {:code \"(def ds5 (tablecloth/dataset {:group [\\\"Accounting\\\" \\\"Accounting\\\" \\\"Engineering\\\" \\\"Engineering\\\" \\\"HR\\\" \\\"HR\\\"]\\n                              :skills [\\\"math\\\" \\\"spreadsheets\\\" \\\"coding\\\" \\\"linux\\\" \\\"spreadsheets\\\" \\\"organization\\\"]}))\", :bg-class \"bg-light\"}]] nil nil], \"608\" [:div [:p] [:div [:p/code {:code \"(def ds3 (tablecloth/inner-join ds1 ds2 :employee))\", :bg-class \"bg-light\"}]] nil nil], \"628\" [:div [:p] nil nil [:p/markdown \"Most simply, you can explicitly specify the name of the key column using the\\non keyword, which takes a column name or a list of column names:\"]], \"638\" [:div [:p] [:div [:p/code {:code \"^kind/dataset\\n(join/left-join [:employee :name] ds1 ds3)\", :bg-class \"bg-light\"}]] nil [:div {:class \"table table-striped table-hover table-condensed table-responsive\", :style {:height \"276px\"}} [:p/markdown \"left-outer-join [4 4]:\\n\\n| :employee |      :group | :name | :salary |\\n|-----------|-------------|-------|--------:|\\n|       Bob |  Accounting |   Bob |   70000 |\\n|      Jake | Engineering |  Jake |   80000 |\\n|      Lisa | Engineering |  Lisa |  120000 |\\n|       Sue |          HR |   Sue |   90000 |\\n\"]]]}}"</script>
    <script src="gorilla-notes/js/compiled/main.js"></script>
</html>
